# ğŸ—„ï¸ DIAGRAMA DE BASE DE DATOS - TALLER MECÃNICO

## Estructura de Tablas y Relaciones

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SISTEMA TALLER MECÃNICO                              â”‚
â”‚                         Base de Datos: Taller (PostgreSQL)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     CUSTOMERS        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)            â”‚
â”‚ â€¢ name               â”‚
â”‚ â€¢ email              â”‚
â”‚ â€¢ phone              â”‚
â”‚ â€¢ document (unique)  â”‚
â”‚ â€¢ address            â”‚
â”‚ â€¢ created_at         â”‚
â”‚ â€¢ updated_at         â”‚
â”‚ â€¢ deleted_at         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N (Un cliente tiene muchos vehÃ­culos)
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     VEHICLES         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)            â”‚
â”‚ â€¢ customer_id (FK)   â”‚â”€â”€â”€â”€â”
â”‚ â€¢ brand              â”‚    â”‚
â”‚ â€¢ model              â”‚    â”‚
â”‚ â€¢ year               â”‚    â”‚
â”‚ â€¢ plate (unique)     â”‚    â”‚
â”‚ â€¢ vin                â”‚    â”‚
â”‚ â€¢ color              â”‚    â”‚
â”‚ â€¢ mileage            â”‚    â”‚
â”‚ â€¢ created_at         â”‚    â”‚
â”‚ â€¢ updated_at         â”‚    â”‚
â”‚ â€¢ deleted_at         â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
           â”‚                â”‚
           â”‚ 1:N            â”‚
           â”‚                â”‚
           â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   WORK_ORDERS        â”‚    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚ â€¢ id (PK)            â”‚    â”‚
â”‚ â€¢ order_number       â”‚    â”‚
â”‚ â€¢ vehicle_id (FK)    â”‚â”€â”€â”€â”€â”˜
â”‚ â€¢ entry_date         â”‚
â”‚ â€¢ estimated_delivery â”‚
â”‚ â€¢ actual_delivery    â”‚
â”‚ â€¢ status             â”‚ (pending, in_progress, completed, delivered, cancelled)
â”‚ â€¢ description        â”‚
â”‚ â€¢ labor_cost         â”‚
â”‚ â€¢ parts_cost         â”‚ â† Calculado automÃ¡ticamente
â”‚ â€¢ total_cost         â”‚ â† Calculado automÃ¡ticamente
â”‚ â€¢ total_price        â”‚ â† Calculado automÃ¡ticamente
â”‚ â€¢ profit             â”‚ â† Calculado automÃ¡ticamente
â”‚ â€¢ notes              â”‚
â”‚ â€¢ created_at         â”‚
â”‚ â€¢ updated_at         â”‚
â”‚ â€¢ deleted_at         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚       â”‚
       â”‚       â”‚ 1:N
       â”‚       â”‚
       â”‚       â–¼
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    â”‚     SERVICES         â”‚
       â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚    â”‚ â€¢ id (PK)            â”‚
       â”‚    â”‚ â€¢ work_order_id (FK) â”‚
       â”‚    â”‚ â€¢ name               â”‚
       â”‚    â”‚ â€¢ description        â”‚
       â”‚    â”‚ â€¢ cost               â”‚
       â”‚    â”‚ â€¢ price              â”‚
       â”‚    â”‚ â€¢ created_at         â”‚
       â”‚    â”‚ â€¢ updated_at         â”‚
       â”‚    â”‚ â€¢ deleted_at         â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ N:M (RelaciÃ³n muchos a muchos con PARTS)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WORK_ORDER_PARTS        â”‚ â† Tabla Pivote
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)                â”‚
â”‚ â€¢ work_order_id (FK)     â”‚â”€â”€â”€â”€â”
â”‚ â€¢ part_id (FK)           â”‚â”€â”€â”€â”€â”¼â”€â”€â”
â”‚ â€¢ quantity               â”‚    â”‚  â”‚
â”‚ â€¢ unit_cost              â”‚    â”‚  â”‚
â”‚ â€¢ unit_price             â”‚    â”‚  â”‚
â”‚ â€¢ subtotal_cost          â”‚ â†â”€â”€â”¼â”€â”€â”¼â”€â”€ Calculado: quantity * unit_cost
â”‚ â€¢ subtotal_price         â”‚ â†â”€â”€â”¼â”€â”€â”¼â”€â”€ Calculado: quantity * unit_price
â”‚ â€¢ created_at             â”‚    â”‚  â”‚
â”‚ â€¢ updated_at             â”‚    â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
                                â”‚  â”‚
                                â”‚  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚              â”‚
                    â”‚              â”‚
                    â–¼              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚       PARTS          â”‚ â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
         â”‚ â€¢ id (PK)            â”‚â—„â”˜
         â”‚ â€¢ code (unique)      â”‚
         â”‚ â€¢ name               â”‚
         â”‚ â€¢ description        â”‚
         â”‚ â€¢ purchase_price     â”‚
         â”‚ â€¢ sale_price         â”‚
         â”‚ â€¢ stock              â”‚ â† Actualizado automÃ¡ticamente
         â”‚ â€¢ min_stock          â”‚
         â”‚ â€¢ created_at         â”‚
         â”‚ â€¢ updated_at         â”‚
         â”‚ â€¢ deleted_at         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ 1:N
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  PART_PURCHASES      â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ â€¢ id (PK)            â”‚
         â”‚ â€¢ part_id (FK)       â”‚
         â”‚ â€¢ supplier           â”‚
         â”‚ â€¢ quantity           â”‚
         â”‚ â€¢ unit_price         â”‚
         â”‚ â€¢ total              â”‚ â† Calculado: quantity * unit_price
         â”‚ â€¢ purchase_date      â”‚
         â”‚ â€¢ notes              â”‚
         â”‚ â€¢ created_at         â”‚
         â”‚ â€¢ updated_at         â”‚
         â”‚ â€¢ deleted_at         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            RELACIONES PRINCIPALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. CUSTOMER â†’ VEHICLES (1:N)
   Un cliente puede tener muchos vehÃ­culos

2. VEHICLE â†’ WORK_ORDERS (1:N)
   Un vehÃ­culo puede tener muchas Ã³rdenes de trabajo

3. WORK_ORDER â†’ SERVICES (1:N)
   Una orden puede tener muchos servicios

4. WORK_ORDER â†â†’ PARTS (N:M)
   Una orden puede tener muchos repuestos
   Un repuesto puede estar en muchas Ã³rdenes
   (RelaciÃ³n a travÃ©s de WORK_ORDER_PARTS)

5. PART â†’ PART_PURCHASES (1:N)
   Un repuesto puede tener muchas compras


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         CÃLCULOS AUTOMÃTICOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WORK_ORDER_PARTS                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ subtotal_cost  = quantity Ã— unit_cost                                       â”‚
â”‚ subtotal_price = quantity Ã— unit_price                                      â”‚
â”‚                                                                              â”‚
â”‚ Al crear/eliminar: Actualiza stock del repuesto                             â”‚
â”‚ Al crear/actualizar/eliminar: Recalcula totales de la orden                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WORK_ORDERS                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ parts_cost  = Î£(work_order_parts.subtotal_cost)                            â”‚
â”‚ total_cost  = labor_cost + parts_cost + Î£(services.cost)                   â”‚
â”‚ total_price = Î£(work_order_parts.subtotal_price) + Î£(services.price)       â”‚
â”‚ profit      = total_price - total_cost                                      â”‚
â”‚                                                                              â”‚
â”‚ order_number: Generado automÃ¡ticamente (OT-000001, OT-000002, etc.)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PARTS                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ stock: Actualizado automÃ¡ticamente                                          â”‚
â”‚   â€¢ Al crear PART_PURCHASE: stock += quantity                               â”‚
â”‚   â€¢ Al crear WORK_ORDER_PART: stock -= quantity                             â”‚
â”‚   â€¢ Al eliminar WORK_ORDER_PART: stock += quantity                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PART_PURCHASES                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ total = quantity Ã— unit_price                                               â”‚
â”‚                                                                              â”‚
â”‚ Al crear: Incrementa stock del repuesto                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              ÃNDICES Y CONSTRAINTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

UNIQUE:
  â€¢ customers.document
  â€¢ vehicles.plate
  â€¢ parts.code
  â€¢ work_orders.order_number

FOREIGN KEYS:
  â€¢ vehicles.customer_id â†’ customers.id (ON DELETE CASCADE)
  â€¢ work_orders.vehicle_id â†’ vehicles.id (ON DELETE CASCADE)
  â€¢ work_order_parts.work_order_id â†’ work_orders.id (ON DELETE CASCADE)
  â€¢ work_order_parts.part_id â†’ parts.id (ON DELETE CASCADE)
  â€¢ services.work_order_id â†’ work_orders.id (ON DELETE CASCADE)
  â€¢ part_purchases.part_id â†’ parts.id (ON DELETE CASCADE)

SOFT DELETES:
  â€¢ customers.deleted_at
  â€¢ vehicles.deleted_at
  â€¢ parts.deleted_at
  â€¢ part_purchases.deleted_at
  â€¢ work_orders.deleted_at
  â€¢ services.deleted_at


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            EJEMPLO DE FLUJO DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. REGISTRAR CLIENTE
   INSERT INTO customers (name, phone, email, ...)

2. REGISTRAR VEHÃCULO
   INSERT INTO vehicles (customer_id, brand, model, plate, ...)

3. CREAR ORDEN DE TRABAJO
   INSERT INTO work_orders (vehicle_id, entry_date, description, labor_cost)
   â†’ Se genera order_number automÃ¡ticamente

4. AGREGAR REPUESTO A ORDEN
   INSERT INTO work_order_parts (work_order_id, part_id, quantity, ...)
   â†’ Se calcula subtotal_cost y subtotal_price
   â†’ Se reduce stock del repuesto
   â†’ Se recalculan totales de la orden

5. AGREGAR SERVICIO A ORDEN
   INSERT INTO services (work_order_id, name, cost, price)
   â†’ Se recalculan totales de la orden

6. RESULTADO AUTOMÃTICO EN WORK_ORDER:
   parts_cost  = Suma de subtotal_cost de repuestos
   total_cost  = labor_cost + parts_cost + suma de cost de servicios
   total_price = Suma de subtotal_price + suma de price de servicios
   profit      = total_price - total_cost


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              ESTADOS DE ORDEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

work_orders.status puede ser:
  â€¢ pending      - Orden creada, esperando inicio
  â€¢ in_progress  - Trabajo en proceso
  â€¢ completed    - Trabajo terminado, esperando entrega
  â€¢ delivered    - VehÃ­culo entregado al cliente
  â€¢ cancelled    - Orden cancelada
```
